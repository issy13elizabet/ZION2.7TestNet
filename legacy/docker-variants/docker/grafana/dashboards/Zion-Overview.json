{
  "title": "Zion Overview",
  "uid": "zion-overview",
  "timezone": "browser",
  "schemaVersion": 38,
  "version": 1,
  "refresh": "10s",
  "panels": [
    {
      "type": "stat",
      "title": "Shim Height",
      "gridPos": {"x": 0, "y": 0, "w": 6, "h": 4},
      "targets": [
        {"expr": "zion_shim_last_height", "refId": "A"}
      ]
    },
    {
      "type": "stat",
      "title": "Adapter Height (via shim)",
      "gridPos": {"x": 6, "y": 0, "w": 6, "h": 4},
      "targets": [
        {"expr": "zion_adapter_last_height", "refId": "A"}
      ]
    },
    {
      "type": "graph",
      "title": "Block Submits (rate)",
      "gridPos": {"x": 0, "y": 4, "w": 12, "h": 8},
      "targets": [
        {"expr": "rate(zion_shim_submitblock_attempts_total[5m])", "legendFormat": "attempts", "refId": "A"},
        {"expr": "rate(zion_shim_submitblock_success_total[5m])", "legendFormat": "success", "refId": "B"},
        {"expr": "rate(zion_shim_submitblock_errors_total[5m])", "legendFormat": "errors", "refId": "C"}
      ]
    },
    {
      "type": "graph",
      "title": "GBT Latency / Cache Hits",
      "gridPos": {"x": 0, "y": 12, "w": 12, "h": 8},
      "targets": [
        {"expr": "histogram_quantile(0.9, rate(zion_shim_gbt_request_duration_seconds_bucket[5m]))", "legendFormat": "p90 latency", "refId": "A"},
        {"expr": "rate(zion_shim_gbt_cache_hits_total[5m])", "legendFormat": "cache hits", "refId": "B"}
      ]
    },
    {
      "type": "graph",
      "title": "Adapter Requests (rate)",
      "gridPos": {"x": 0, "y": 20, "w": 12, "h": 8},
      "targets": [
        {"expr": "sum by (route,method,status) (rate(zion_adapter_http_requests_total[5m]))", "legendFormat": "{{route}} {{method}} {{status}}", "refId": "A"}
      ]
    }
  ]
}
